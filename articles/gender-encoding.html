<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="genderconsciousrouting">
<title>Gender Encoding • genderconsciousrouting</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Gender Encoding">
<meta property="og:description" content="genderconsciousrouting">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">genderconsciousrouting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gender-encoding.html">Gender Encoding</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mpadge/gender-conscious-routing/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="gender-encoding_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Gender Encoding</h1>
                        <h4 data-toc-skip class="author">Mark Padgham</h4>
            
            <h4 data-toc-skip class="date">2022-08-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mpadge/gender-conscious-routing/blob/HEAD/vignettes/gender-encoding.Rmd" class="external-link"><code>vignettes/gender-encoding.Rmd</code></a></small>
      <div class="d-none name"><code>gender-encoding.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="gender-encoding">Gender Encoding<a class="anchor" aria-label="anchor" href="#gender-encoding"></a>
</h2>
<p>This <strong>R</strong> package includes an internally bundled C library for categorising the gender of first names, thanks to Michael Jörg (available <a href="https://www.heise.de/ct/ftp/07/17/182/" class="external-link">here</a>). The library is extremely fast and flexible; covers all European languages and a host of others, and categorises gender very accurately. Here’s a test run on a very large data set of names from the English-speaking world:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">u</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/hadley/data-baby-names/raw/master/baby-names.csv"</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span> <span class="op">(</span><span class="st">"baby-names.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">chk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span> <span class="op">(</span><span class="va">u</span>, <span class="st">"baby-names.csv"</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span> <span class="op">(</span><span class="st">"baby-names.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "258,000"</span></span>
<span><span class="va">st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_gender.html">get_gender</a></span> <span class="op">(</span><span class="va">n</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">st</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.186   0.069   0.255</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Var1</th>
<th align="right">Freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">IS_FEMALE</td>
<td align="right">103059</td>
</tr>
<tr class="even">
<td align="left">IS_MALE</td>
<td align="right">95751</td>
</tr>
<tr class="odd">
<td align="left">IS_MOSTLY_FEMALE</td>
<td align="right">15919</td>
</tr>
<tr class="even">
<td align="left">IS_MOSTLY_MALE</td>
<td align="right">17290</td>
</tr>
<tr class="odd">
<td align="left">IS_UNISEX_NAME</td>
<td align="right">11296</td>
</tr>
<tr class="even">
<td align="left">NAME_NOT_FOUND</td>
<td align="right">14685</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">n</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Var1</th>
<th align="right">Freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">boy</td>
<td align="right">129000</td>
</tr>
<tr class="even">
<td align="left">girl</td>
<td align="right">129000</td>
</tr>
</tbody>
</table>
<p>Categorising 258,000 names took only 0.255 seconds, or around 100,000 names per second. The following code compares the accuracy, noting that many names are of course unisex, whereas the “baby-names” data are direct records of individual names and sex.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"boy"</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MOSTLY_MALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"boy"</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_FEMALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"girl"</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MOSTLY_FEMALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"girl"</span></span>
<span></span>
<span><span class="va">index_right</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="va">n</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">index_right</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">" / "</span>,</span>
<span>         <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>,</span>
<span>         <span class="st">" of names correctly classified = "</span>,</span>
<span>         <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">index_right</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>                  format <span class="op">=</span> <span class="st">"f"</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="st">"%"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 217,630 / 258,000 of names correctly classified = 84.4%</span></span></code></pre></div>
<p>Noting that the baby name records are structured over time, and include many repeats of the same names, we can try to create “mostly girl/boy” categories based on relative proportions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">categorise_sex</span> <span class="op">&lt;-</span>  <span class="kw">function</span> <span class="op">(</span><span class="va">sex</span>, <span class="va">size</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># define relative proportions:</span></span>
<span>    <span class="co"># if &gt; rel_props [2], then category is singular</span></span>
<span>    <span class="co"># else if &gt; rel_props [1], then category is "mostly" singular,</span></span>
<span>    <span class="co"># else category is unisex</span></span>
<span>    <span class="va">rel_props</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">4</span>, <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">size</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="va">sex</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">bi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"boy"</span><span class="op">)</span></span>
<span>    <span class="va">gi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"girl"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">bi</span><span class="op">]</span> <span class="op">&gt;</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">gi</span><span class="op">]</span> <span class="op">*</span> <span class="va">rel_props</span> <span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="st">"boy"</span><span class="op">)</span></span>
<span>    <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">gi</span><span class="op">]</span> <span class="op">&gt;</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">bi</span><span class="op">]</span> <span class="op">*</span> <span class="va">rel_props</span> <span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="st">"girl"</span><span class="op">)</span></span>
<span>    <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">bi</span><span class="op">]</span> <span class="op">&gt;</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">gi</span><span class="op">]</span> <span class="op">*</span> <span class="va">rel_props</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="st">"mostly boy"</span><span class="op">)</span></span>
<span>    <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">gi</span><span class="op">]</span> <span class="op">&gt;</span> <span class="op">(</span><span class="va">size</span> <span class="op">[</span><span class="va">bi</span><span class="op">]</span> <span class="op">*</span> <span class="va">rel_props</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="st">"mostly girl"</span><span class="op">)</span></span>
<span>    <span class="kw">else</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="st">"unisex"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="va">n2</span> <span class="op">&lt;-</span> <span class="va">n</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span> <span class="op">(</span><span class="va">name</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span> <span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span> <span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span> <span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span> <span class="op">(</span>category <span class="op">=</span> <span class="fu">categorise_sex</span> <span class="op">(</span><span class="va">sex</span>, <span class="va">size</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">n2</span><span class="op">$</span><span class="va">category</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Var1</th>
<th align="right">Freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">boy</td>
<td align="right">2764</td>
</tr>
<tr class="even">
<td align="left">girl</td>
<td align="right">3345</td>
</tr>
<tr class="odd">
<td align="left">mostly boy</td>
<td align="right">147</td>
</tr>
<tr class="even">
<td align="left">mostly girl</td>
<td align="right">224</td>
</tr>
<tr class="odd">
<td align="left">unisex</td>
<td align="right">302</td>
</tr>
</tbody>
</table>
<p>The above values for relative proportions were selected to give good agreement with the observed overall distribution of categories as determined by the internal library. These two more refined data sets can then be compared:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_gender.html">get_gender</a></span> <span class="op">(</span><span class="va">n2</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">$</span><span class="va">gender</span></span>
<span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_FEMALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"girl"</span></span>
<span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"boy"</span></span>
<span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MOSTLY_FEMALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"mostly girl"</span></span>
<span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_MOSTLY_MALE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"mostly boy"</span></span>
<span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">[</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"IS_UNISEX_NAME"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"unisex"</span></span></code></pre></div>
<p>Some names are simply not found, so we’ll remove those from the comparison before calculating final statistics.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n2</span> <span class="op">&lt;-</span> <span class="va">n2</span> <span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="op">!</span><span class="va">n2</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"NAME_NOT_FOUND"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span> <span class="op">(</span><span class="va">n2</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">category</span>, <span class="va">gender</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">boy</th>
<th align="right">girl</th>
<th align="right">mostly boy</th>
<th align="right">mostly girl</th>
<th align="right">unisex</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">boy</td>
<td align="right">1643</td>
<td align="right">19</td>
<td align="right">92</td>
<td align="right">15</td>
<td align="right">61</td>
</tr>
<tr class="even">
<td align="left">girl</td>
<td align="right">19</td>
<td align="right">2221</td>
<td align="right">15</td>
<td align="right">89</td>
<td align="right">66</td>
</tr>
<tr class="odd">
<td align="left">mostly boy</td>
<td align="right">90</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">4</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">mostly girl</td>
<td align="right">0</td>
<td align="right">173</td>
<td align="right">3</td>
<td align="right">30</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">unisex</td>
<td align="right">27</td>
<td align="right">44</td>
<td align="right">65</td>
<td align="right">79</td>
<td align="right">66</td>
</tr>
</tbody>
</table>
<p>The accuracy in that case is</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span> <span class="op">(</span><span class="va">n2</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">category</span>, <span class="va">gender</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span> <span class="op">(</span><span class="va">ct</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span> <span class="op">(</span><span class="va">ct</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.8196923</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mark Padgham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
